{% extends "base.html" %}
{% block title %}Dashboard - Face Mask Detection{% endblock %}
{% block content %}
<div class="d-flex flex-column align-items-center justify-content-center min-vh-100 text-center">
  <div class="container">
    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        {% for category, msg in messages %}
          <div class="alert alert-{{ category }} alert-dismissible fade show" role="alert">
            {{ msg }}
            <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
          </div>
        {% endfor %}
      {% endif %}
    {% endwith %}
  </div>

  <header class="mb-4">
    <h1>ðŸ›¡ Face Mask Detection</h1>
    <p class="subtitle">AI-powered real-time monitoring</p>
  </header>

  <main class="w-100 d-flex flex-column align-items-center">
    <div class="video-wrapper position-relative mb-3" style="max-width: 700px; width: 100%">
      <video id="video" autoplay muted playsinline class="border rounded shadow w-100"></video>
      <canvas id="overlay"></canvas>
    </div>

    <div class="controls mb-3">
      <button id="startBtn" class="btn btn-success me-2">Start Camera</button>
      <button id="stopBtn" class="btn btn-danger" disabled>Stop & Capture</button>
    </div>

    <div id="statustext" class="status fw-bold text-light">Ready</div>

    <!-- Captured Image Preview -->
    <div id="captureContainer" class="mt-4" style="display:none;">
      <h5 class="text-light mb-3">ðŸ“¸ Captured Frame</h5>
      <img id="capturedImage" class="border rounded shadow w-100" alt="Captured Frame" />
      <a id="downloadLink" class="btn btn-gradient mt-3" download="captured_frame.png">Download Image</a>
    </div>
  </main>
</div>

<script src="{{ url_for('static', filename='js/app.js') }}"></script>
{% endblock %}
